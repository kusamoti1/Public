# 底値メモ: 現状整理と統合改善プラン

このドキュメントは、既存の改善案を1つに統合し、
**競合しにくい構成**で「次に何を作るか」を判断しやすくするための最新版です。

## 1) 現在できること（現状機能）

### 記録・閲覧
- 商品名 / 店舗 / 価格 / 単位 / 日付 / メモを登録
- 一覧検索（商品名・店舗）
- ソート（新しい順、古い順、安い順、高い順、品名順）
- 店舗フィルター
- 商品名ごとの最安値ラベル（底値）

### 編集・管理
- 詳細モーダルから編集・削除
- JSONエクスポート / インポート
- 全件削除

### 利用形態
- PWAとしてホーム画面追加・オフライン利用
- ブラウザ内保存（localStorage）

---

## 2) いまの課題（優先度: 高）

1. **比較精度の課題**
   - 容量違い（例: 300gと500g）でも同じ商品名なら単純比較される
2. **入力速度の課題**
   - 買い物中の入力回数が多く、片手運用で時間がかかる
3. **データ保全の課題**
   - localStorage依存のため、ブラウザデータ消去の影響を受ける
4. **容量の課題（写真対応後）**
   - 画像保存で容量上限に達しやすい

---

## 3) 改善方針（優先度順）

### A. 比較精度アップ
- 容量（g/ml/個）と税区分（税込/税抜）を保持
- 単価（100g・100ml・1個）を自動計算
- 最安値判定を「実売価格 / 単価」で切替可能にする

### B. 入力体験アップ
- 前回値再利用（店名・単位）
- 商品名サジェスト
- 「前回と同じで登録」ボタン
- よく買う商品のピン留め

### C. データ保全アップ
- IndexedDB移行（画像保存を含む）
- 定期バックアップ通知
- 復元しやすいエクスポート導線

### D. 活用価値アップ
- 価格推移グラフ
- 店舗別平均価格
- 値上げアラート
- CSV出力

---

## 4) 段階的リリース（衝突しにくい実装順）

### 第1段階（まず体験を整える）
1. 商品サジェスト
2. カテゴリー初期設定
3. 入力文言のやさしい改善

### 第2段階（運用を速くする）
1. バーコード読み取り
2. 「前回と同じで登録」
3. ローカルバックアップ導線の改善

### 第3段階（差別化）
1. 写真からの商品判別（AI候補表示）
2. 判別結果の学習（よく使う修正を優先提案）

---

## 5) 4週間ロードマップ（実務向け）

### Week 1
- データモデル拡張（容量・税区分・単価）
- 既存データ互換処理
- 入力UI微調整

### Week 2
- 商品サジェスト
- 前回値再利用
- 「前回と同じで登録」

### Week 3
- IndexedDB移行
- バックアップ導線改善
- 画像データ保存方針の最適化

### Week 4
- 推移グラフ
- 値上げアラート
- CSV出力

---

## 6) KPI（改善効果の測定）
- 1件登録の平均時間
- 週あたり登録件数（継続率）
- 底値購入率
- バックアップ実施率
- データ消失報告件数

---

## 7) まず着手するMVP+
1. 単価比較（容量対応）
2. 商品名サジェスト
3. IndexedDB移行 + バックアップ導線

この3点で、**使いやすさ / 比較精度 / 安心感**を同時に改善します。

---

## 8) 最後に（このプランの目標）
この改善プランの目標は次の3つです。

- だれでもすぐ使える
- 買い物中に迷わない
- 比較が正確で節約につながる

**直感的で、やさしく、安心して使える iPhone/PWA家計補助アプリ**を目指します。
