# 底値メモ 改善プラン（iPhone専用・やさしい版）

この文書は、次の6人で話し合ってまとめた改善案です。

1. プログラマー兼デバッガー
2. スマホアプリの専門家
3. 文章の校閲の専門家
4. AIシステムの専門家
5. 買い物をよくする一般ユーザー
6. 統括官（まとめ役）

難しい言葉はできるだけ使わず、
**「押したら分かる」「見たら分かる」**を目標にしています。

---

## 1) 6人チームで決めた方針（結論）

- iPhoneで使いやすいことを最優先にする
- 入力はなるべく自動化し、手入力を減らす
- お肉などは**グラム（g）で管理**できるようにする
- バーコード読み取りと写真読み取りを用意する
- カテゴリーは最初から用意して、迷わず選べるようにする
- バックアップは端末内（ローカル）で完結できるようにする
- データは外に公開しない前提で、説明文もやさしくする

---

## 2) 役割ごとの意見（やさしく要約）

### 1. プログラマー兼デバッガー
- 壊れにくい作りにする
- 入力ミスを減らすため、数字入力欄を分かりやすくする
- 保存・復元・編集・削除が確実に動くように確認する

### 2. スマホアプリ専門家
- iPhoneで片手操作しやすいボタンサイズにする
- カメラ起動やバーコード読み取りをスムーズにする
- オフラインでも使えるようにする

### 3. 文章校閲の専門家
- エラー文は怖くない言い方にする
- 画面の言葉を短く・やさしくする
- 例: 「失敗しました」ではなく「うまく保存できませんでした。もう一度お試しください」

### 4. AIシステム専門家
- 写真から商品を推定して、カテゴリー候補を出す
- 完全自動ではなく「候補を提案→ユーザーが決定」にする
- 間違い時はワンタップで直せるようにする

### 5. 一般ユーザー（買い物目線）
- 買い物中に急いでいても3タップ以内で登録したい
- 「前回と同じ」で登録できると助かる
- お肉の値段比較は「100gあたり」が分かると嬉しい

### 6. 統括官（まとめ）
- まずは、毎日の買い物で本当に使える機能から作る
- 難しい機能は後回しにし、先に使い心地を仕上げる

---

## 3) 画面でできること（新しい完成イメージ）

### ホーム（一覧）
- 商品カードに次を表示
  - 商品名
  - 店舗
  - 購入日
  - 価格（税込）
  - 重さ（g）または個数
  - 100gあたり価格（g入力時）
- 「最安」バッジを表示

### かんたん登録
- 入力方法を3つ用意
  1. 手入力
  2. バーコード読み取り
  3. 写真読み取り（商品判別）
- どの方法でも最後に確認画面を出す（誤登録防止）

### データ管理
- 端末内バックアップ（JSON保存）
- 端末内復元（JSON読み込み）
- 「外部に公開しません」の説明を明記

---

## 4) ご要望に対する対応内容

### 4-1. お肉などの計量（グラム管理）

- 数量欄に「g（グラム）」を追加
- 価格比較は次の基準を使う
  - **100gあたり価格 = 価格 ÷ グラム数 × 100**

例）
- 450円 / 300g → 100gあたり150円
- 520円 / 400g → 100gあたり130円（こちらが安い）

これで、重さが違うパックでも公平に比較できます。

### 4-2. 識別機能

#### (a) バーコード読み取り
- iPhoneカメラでバーコードを読む
- 商品名・メーカー名などを候補表示
- 読み取り後、価格だけ入れれば保存できる形にする

#### (b) 写真からの自動判別
- 商品写真を撮る
- AIが「これは肉/野菜/飲み物」などを候補表示
- カテゴリーと商品名候補を自動入力
- ユーザーは最終確認して保存

※AIの判定は間違うことがあるため、必ず確認ステップを入れます。

---

## 5) 初期プリセット（最初から入れておく項目）

「ある程度すべて入力したい」という希望に合わせ、最初から次を用意します。

### 入力項目（基本）
- 商品名
- カテゴリー
- 店舗
- 価格（税込）
- 数量（g / ml / 個）
- 購入日
- メモ

### カテゴリー初期設定（案）
- 肉
- 魚
- 野菜
- 果物
- 乳製品
- たまご
- 飲み物
- 冷凍食品
- お菓子
- 調味料
- 日用品
- その他

---

## 6) バックアップと公開範囲

- バックアップは**ローカルのみ**で対応
- 書き出したファイルはiPhone内に保存
- 復元もそのファイルを読み込むだけ
- 標準の説明文は次に統一

> このアプリの記録は、あなたの端末内に保存されます。外部に自動公開されることはありません。安心してお使いください。

---

## 7) 優しい文言サンプル（画面表示）

- 保存成功: 「保存できました」
- 保存失敗: 「うまく保存できませんでした。通信や入力内容をご確認ください」
- 削除確認: 「この記録を削除しますか？あとで元に戻せません」
- 復元完了: 「データを読み込みました」

---

## 8) 実装の順番（iPhoneで早く使える順）

### 第1段階（最優先）
1. グラム対応と100gあたり比較
2. カテゴリー初期設定
3. 入力画面のやさしい文言化

### 第2段階
1. バーコード読み取り
2. 「前回と同じで登録」
3. ローカルバックアップ導線の改善

### 第3段階
1. 写真からの商品判別（AI候補表示）
2. 判別結果の学習（よく使う修正を優先表示）

---

## 9) 最後に（このプランの目標）

この改善プランの目標は、

- だれでもすぐ使える
- 買い物中に迷わない
- 比較が正確で節約につながる

の3つです。

**直感的で、やさしく、安心して使えるiPhoneアプリ**として仕上げます。
# 底値メモ: 現状整理と統合改善プラン

このドキュメントは、既存の改善案を1つに統合し、
**競合しにくい構成**で「次に何を作るか」を判断しやすくするための最新版です。

## 1) 現在できること（現状機能）

### 記録・閲覧
- 商品名 / 店舗 / 価格 / 単位 / 日付 / メモを登録
- 一覧検索（商品名・店舗）
- ソート（新しい順、古い順、安い順、高い順、品名順）
- 店舗フィルター
- 商品名ごとの最安値ラベル（底値）

### 編集・管理
- 詳細モーダルから編集・削除
- JSONエクスポート / インポート
- 全件削除

### 利用形態
- PWAとしてホーム画面追加・オフライン利用
- ブラウザ内保存（localStorage）

---

## 2) いまの課題（優先度: 高）

1. **比較精度の課題**
   - 容量違い（例: 300gと500g）でも同じ商品名なら単純比較される
2. **入力速度の課題**
   - 買い物中の入力回数が多く、片手運用で時間がかかる
3. **データ保全の課題**
   - localStorage依存のため、ブラウザデータ消去の影響を受ける
4. **容量の課題（写真対応後）**
   - 画像保存で容量上限に達しやすい

---

## 3) 改善方針（優先度順）

### A. 比較精度アップ
- 容量（g/ml/個）と税区分（税込/税抜）を保持
- 単価（100g・100ml・1個）を自動計算
- 最安値判定を「実売価格 / 単価」で切替可能にする

### B. 入力体験アップ
- 前回値再利用（店名・単位）
- 商品名サジェスト
- 「前回と同じで登録」ボタン
- よく買う商品のピン留め

### C. データ保全アップ
- IndexedDB移行（画像保存を含む）
- 定期バックアップ通知
- 復元しやすいエクスポート導線

### D. 活用価値アップ
- 価格推移グラフ
- 店舗別平均価格
- 値上げアラート
- CSV出力

---

## 4) 段階的リリース（衝突しにくい実装順）

### 第1段階（まず体験を整える）
1. 商品サジェスト
2. カテゴリー初期設定
3. 入力文言のやさしい改善

### 第2段階（運用を速くする）
1. バーコード読み取り
2. 「前回と同じで登録」
3. ローカルバックアップ導線の改善

### 第3段階（差別化）
1. 写真からの商品判別（AI候補表示）
2. 判別結果の学習（よく使う修正を優先提案）

---

## 5) 4週間ロードマップ（実務向け）

### Week 1
- データモデル拡張（容量・税区分・単価）
- 既存データ互換処理
- 入力UI微調整

### Week 2
- 商品サジェスト
- 前回値再利用
- 「前回と同じで登録」

### Week 3
- IndexedDB移行
- バックアップ導線改善
- 画像データ保存方針の最適化

### Week 4
- 推移グラフ
- 値上げアラート
- CSV出力

---

## 6) KPI（改善効果の測定）
- 1件登録の平均時間
- 週あたり登録件数（継続率）
- 底値購入率
- バックアップ実施率
- データ消失報告件数

---

## 7) まず着手するMVP+
1. 単価比較（容量対応）
2. 商品名サジェスト
3. IndexedDB移行 + バックアップ導線

この3点で、**使いやすさ / 比較精度 / 安心感**を同時に改善します。

---

## 8) 最後に（このプランの目標）
この改善プランの目標は次の3つです。

- だれでもすぐ使える
- 買い物中に迷わない
- 比較が正確で節約につながる

**直感的で、やさしく、安心して使える iPhone/PWA家計補助アプリ**を目指します。
# 底値メモ: 現状整理と改善提案

## 1. 現在できること（現状機能）

### 記録・閲覧
- 商品名 / 店舗 / 価格 / 単位 / 日付 / メモを登録できる
- 一覧で検索（商品名・店舗）とソート（新しい順、古い順、安い順、高い順）ができる
- 店舗チップで店舗フィルターができる
- 商品名ごとに最安値を自動判定し「底値」ラベル表示できる

### 編集・管理
- 詳細モーダルから編集・削除できる
- localStorage に保存され、アプリ再起動後も保持される
- JSON エクスポート / インポートができる
- 全件削除ができる

### 利用形態
- PWA（manifest + service worker）としてオフライン利用を想定した構成

## 2. すぐ効く改善（優先度: 高）

### A. データモデル改善（価格比較の精度アップ）
現状は「商品名」が同じなら最安値比較されるため、容量違い・規格違いを比較してしまう可能性があります。

**提案**
- `容量（g/ml/個数）` と `税込/税抜` フラグを追加
- 100g単価 / 1個単価の自動計算フィールドを追加
- 「実売価格」と「単価」を切り替えて最安値判定

**効果**
- 底値判定が実用的になり、買い物判断の質が上がる

### B. 入力体験の改善（登録速度アップ）
**提案**
- 前回入力値（店舗・単位）をデフォルト再利用
- 商品名のサジェスト（過去登録履歴）
- 「よく買う商品」ピン留め
- 数値キーパッド最適化（価格・容量）

**効果**
- 買い物中の片手操作での登録時間を短縮

### C. データ保全（消失リスク対策）
localStorage 依存は端末消去・ブラウザ設定変更の影響を受けます。

**提案**
- IndexedDB への移行（容量・信頼性改善）
- 自動バックアップ通知（例: 月1回）
- 任意クラウド同期（Google Drive / iCloud Drive 経由のファイル連携）

**効果**
- 長期運用時の安心感が上がる

## 3. 次の成長施策（優先度: 中）

### D. 分析ダッシュボード
**提案**
- 商品ごとの価格推移グラフ
- 店舗別の平均価格比較
- 値上げアラート（直近n回平均比 +x%）

**効果**
- 「どこで買うべきか」「いつ買うべきか」の意思決定が早くなる

### E. 買い物モード
**提案**
- 買い物リスト連携（必要商品だけを表示）
- 現在地に近い店舗表示（任意許可）
- チェック時に「今回価格」を即記録

**効果**
- 記録アプリから「行動支援アプリ」へ進化

### F. 共有・家計連携
**提案**
- 家族とデータ共有（読み書き権限）
- CSV出力（家計簿アプリ取り込み）
- 月次節約レポート（底値購入率）

**効果**
- 単独メモ用途から家庭運用へ拡張可能

## 4. 品質改善（優先度: 中）

### G. PWAの仕上げ
**提案**
- アイコンパス・キャッシュ対象の整合性確認
- バージョン更新時のキャッシュ更新導線（更新通知）
- オフライン時エラーハンドリングの明確化

### H. アクセシビリティ
**提案**
- コントラスト比再点検
- フォームラベルとフォーカス順序の改善
- 音声読み上げ向けのaria属性補強

### I. テスト整備
**提案**
- 登録 / 編集 / 削除 / インポートの主要フローE2E
- 価格計算ロジックのユニットテスト

## 5. 実装ロードマップ（4週間案）

### Week 1: 基盤
- データモデル拡張（容量・税区分・単価）
- 既存データマイグレーション
- 主要フォーム改善

### Week 2: 価値機能
- 単価比較UI
- 商品サジェスト
- よく買う商品ピン留め

### Week 3: 安定性
- IndexedDB移行
- 自動バックアップ導線
- PWA更新通知

### Week 4: 差別化
- 価格推移グラフ
- 値上げアラート
- CSV出力

## 6. KPI（改善効果の測定）
- 1件登録にかかる平均秒数
- 週あたり記録件数（継続率）
- 底値購入率
- バックアップ実施率
- データ消失報告件数

---

## まず着手すべき最小セット（MVP+）
1. 単価比較（容量追加）
2. 商品名サジェスト
3. IndexedDB移行 + バックアップ導線

この3点だけで、**「使いやすさ」「判断精度」「安心感」**が大きく向上します。
